"use strict";var express=require("express"),path=require("path"),wrap=require("./wraper"),app=express(),port=process.env.PORT||"8000";app.set("views",path.join(__dirname,"views")),app.set("view engine","pug"),app.use(express.static(path.join(__dirname,"public")));var _require=require("mongodb"),MongoClient=_require.MongoClient,_require2=require("../config.json"),password=_require2.password,uri=_require2.uri,client=new MongoClient(uri,{useNewUrlParser:!0,useUnifiedTopology:!0});app.get("/",function(e,r){return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:r.render("ping-project/index",{title:"Home"});case 1:case"end":return e.stop()}})}),app.get("/ping",wrap(function(e,r){var t,i;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,regeneratorRuntime.awrap(client.connect());case 2:return cursor=client.db("ping").collection("ping").find({}).sort({_id:-1}),e.next=5,regeneratorRuntime.awrap(cursor.toArray());case 5:for(row=e.sent,ping_value={length:0},t=0;t<row.length;t++)i=(i=row[t]._id).substring(0,8),n=String(t),ping_value.length=t,ping_value[n]=row[n].ping_value+", "+row[n].est+", "+i;r.render("ping-project/ping",{title:"ping project",data:row,ping_value:ping_value});case 9:case"end":return e.stop()}})})),app.get("/high-ping",wrap(function(e,r){return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,regeneratorRuntime.awrap(client.connect());case 2:return cursor=client.db("ping").collection("ping").find({ping_value:{$gt:500}}),e.next=5,regeneratorRuntime.awrap(cursor.toArray());case 5:row=e.sent,console.log(row),r.render("ping-project/ping-high",{title:"High Ping",userProfile:{data:row}});case 8:case"end":return e.stop()}})})),app.get("/low-ping",wrap(function(e,r){return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,regeneratorRuntime.awrap(client.connect());case 2:return cursor=client.db("ping").collection("ping").find({ping_value:{$lt:45}}),e.next=5,regeneratorRuntime.awrap(cursor.toArray());case 5:row=e.sent,console.log(row),r.render("ping-project/ping-low",{title:"Low Ping",userProfile:{data:row}});case 8:case"end":return e.stop()}})})),app.get("/development",function(e,r){r.render("ping-project/development",{title:"development",data:data})}),app.listen(port,function(){console.log("Listening for requests on http://localhost:".concat(port))});