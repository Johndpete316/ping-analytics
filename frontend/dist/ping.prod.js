"use strict";var tcpp=require("tcp-ping"),moment=require("moment-timezone"),_require=require("mongodb"),MongoClient=_require.MongoClient,_require2=require("../config.json"),password=_require2.password,uri=_require2.uri,client=new MongoClient(uri,{useNewUrlParser:!0,useUnifiedTopology:!0}),host="51.161.117.73";function main(){var n,r,o,i,a;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:x=5,n=moment().tz("UTC").format("LTS"),r=moment().tz("UTC").format("L"),o=moment().format("LTS"),i=moment().format("L"),a="".concat(i," ").concat(o),tcpp.ping({address:host,port:25677},function(e,t){return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(a),ping_data={_id:a,day:moment().format("ddd"),hour:moment().format("hh"),device:"the-beast",date_est:i,time_est:o,date_utc:r,time_utc:n,ip:t.address,ping_avg:t.avg,ping_max:t.max,ping_min:t.min},e.next=4,regeneratorRuntime.awrap(client.connect());case 4:return e.next=6,regeneratorRuntime.awrap(client.db("data").collection("ping-data").insertOne(ping_data).catch(function(e){console.error(e)}));case 6:case"end":return e.stop()}})}),setTimeout(main,1e3*x);case 8:case"end":return e.stop()}})}main();