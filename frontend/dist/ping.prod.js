"use strict";var tcpp=require("tcp-ping"),moment=require("moment-timezone"),_require=require("mongodb"),MongoClient=_require.MongoClient,_require2=require("../config.json"),password=_require2.password,uri=_require2.uri,client=new MongoClient(uri,{useNewUrlParser:!0,useUnifiedTopology:!0}),host="172.217.1.238";function main(){var r,o,i,a,c;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:console.log("ran main"),x=1800,r=moment().tz("UTC").format("LTS"),o=moment().tz("UTC").format("L"),i=moment().format("LTS"),a=moment().format("L"),c="".concat(a,"-").concat(i),tcpp.ping({address:host,port:443},function(e,n){var t;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(c),t=n.avg,t=Math.round(10*t)/10,console.log(t),ping_data={_id:c,day:moment().format("ddd"),hour:moment().format("hh"),device:"the-beast",date_est:a,time_est:i,date_utc:o,time_utc:r,ip:n.address,ping_value:t},e.next=7,regeneratorRuntime.awrap(client.connect());case 7:return e.next=9,regeneratorRuntime.awrap(client.db("ping").collection("ping").insertOne(ping_data).catch(function(e){console.error(e)}));case 9:case"end":return e.stop()}})}),setTimeout(main,1e3*x);case 9:case"end":return e.stop()}})}console.log(host),main();